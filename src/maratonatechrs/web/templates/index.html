<!DOCTYPE HTML>
<html lang="pt_BR">
<head>
<meta charset="UTF-8" />
<meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
/>
<title>{{ name }} - {{ title }}</title>
<link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
/>
<script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
></script>
<link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/mapa.css') }}"
/>
</head>
<body>
<!--
<h1>{{ title }}</h1>
<h2>{{ name }} v{{ version }}</h2>
-->
<a href="{{ url_for('marcador') }}">Cadastrar marcador</a>
&nbsp;
<a href="{{ url_for('poligono') }}">Cadastrar pol&iacute;gono</a>
<hr>
<div id="mapa" class="mapa"></div>
</body>
<footer>
<script
    type="text/javascript"
    src="{{ url_for('static', filename='geojson/teste.geojson') }}"
></script>
<script
    src="{{ url_for('static', filename='js/mapa.js') }}"
/></script>
<!-- Eu sei que vai ficar enchendo o HTML de coisa aqui e que isto 
deveria ser processado pelo javascript, o que pouca gente sabe é qual 
abordagem será que faz o site travar mais ou menos -->
<script>
{% for marker in markers %}
    L.marker([{{ marker['lat'] }}, {{ marker['lon'] }}]).addTo(marcadores)
    .bindPopup("{{ marker['popup'] }}")
    .openPopup();
{% endfor %}
{% for polygon in polygons %}
    L.polygon([
        {% for latlong in polygon['latlongs'] %}
            {{ latlong }},
        {% endfor %}
    ],
    {
        color: "{{ polygon['color'] }}"
    })
    .addTo(areas)
    .bindPopup("{{ polygon['description'] }}");
{% endfor %}
</script>
</footer>
</html>
